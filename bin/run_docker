#!/usr/bin/bash

GIGAHORSE_ROOT="$(dirname "$(dirname "$(readlink -fm "$0")")")"

mkdir -p ${GIGAHORSE_ROOT}/.temp

docker run \
    -v ${HOME}:${HOME} \
    --mount type=bind,source=${GIGAHORSE_ROOT}/.temp,target=/opt/gigahorse/gigahorse-toolchain/.temp \
    --mount type=bind,source=${GIGAHORSE_ROOT}/cache,target=/opt/gigahorse/gigahorse-toolchain/cache \
    -u `id -u $USER`:`id -g $USER` \
    -w $(pwd) \
    -it gigahorse $@
